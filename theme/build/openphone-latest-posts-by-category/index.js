(()=>{"use strict";const e=window.wp.element,t=window.wp.data,o=window.wp.blocks,r=window.wp.components,s=window.wp.blockEditor,a=JSON.parse('{"apiVersion":2,"name":"openphone/latest-category-posts","title":"Latest Category Posts","icon":"megaphone","category":"common","editorScript":"file:./index.js","attributes":{"selectedCategory":{"type":"string","default":""},"postsToShow":{"type":"number","default":10},"preHeader":{"type":"string","default":"Featured resource"},"showBrowseResources":{"type":"boolean","default":false},"browseResourcesText":{"type":"string","default":""},"browseResourcesLink":{"type":"string","default":""},"browseResourcesImage":{"type":"string","default":""}}}'),{name:l,...n}=a;(0,o.registerBlockType)(l,{...n,edit:o=>{const{attributes:a,setAttributes:l}=o,n=(0,t.useSelect)((e=>e("core").getEntityRecords("taxonomy","category")),[]),c=(0,t.useSelect)((e=>e("core").getEntityRecords("postType","post",{per_page:a.postsToShow,categories:a.selectedCategory})),[a]);return(0,e.createElement)(e.Fragment,null,(0,e.createElement)(s.RichText,{tagName:"h4",value:a.preHeader,placeholder:"Pre Header(optional)",onChange:e=>l({preHeader:e})}),(0,e.createElement)("div",{className:o.className},(0,e.createElement)(r.SelectControl,{label:"Category",value:a.selectedCategory,options:n&&n.map((e=>({value:e.id,label:e.name}))),onChange:e=>l({selectedCategory:e})}),c&&c.map((t=>(0,e.createElement)("div",{key:t.id},(0,e.createElement)("h2",null,t.title.rendered),(0,e.createElement)("div",{dangerouslySetInnerHTML:{__html:t.excerpt.rendered}})))),(0,e.createElement)(r.ToggleControl,{label:"Show Browse Resources",checked:a.showBrowseResources,onChange:e=>l({showBrowseResources:e})}),a.showBrowseResources&&(0,e.createElement)(e.Fragment,null,(0,e.createElement)("label",null,"Browse Resources Link"),(0,e.createElement)(s.URLInput,{value:a.browseResourcesLink,onChange:e=>l({browseResourcesLink:e})}),(0,e.createElement)(s.MediaUploadCheck,null,(0,e.createElement)(s.MediaUpload,{onSelect:e=>l({browseResourcesImage:e.url}),allowedTypes:["image"],value:a.browseResourcesImage,render:({open:t})=>(0,e.createElement)("button",{onClick:t},"Upload Image")})),(0,e.createElement)(s.RichText,{tagName:"p",value:a.browseResourcesText,placeholder:"Browse Resources Text",onChange:e=>l({browseResourcesText:e})}))))},save:()=>null})})();